# vim: filetype=neomuttrc
source /usr/share/mutt-wizard/mutt-wizard.muttrc # mw-autogenerated
#macro index,pager i1 '<sync-mailbox><enter-command>source /home/mariussw/.config/mutt/accounts/1-marius.wishman@ntnu.no.muttrc<enter><change-folder>!<enter>;<check-stats>' "switch to marius.wishman@ntnu.no"

macro compose m \
"<enter-command>set pipe_decode<enter>\
<pipe-message>pandoc -f gfm -t plain -o /tmp/msg.txt<enter>\
<pipe-message>pandoc -s -f gfm --embed-resources --standalone -o /tmp/msg.html --resource-path ~/.config/mutt/ --template email<enter>\
<enter-command>unset pipe_decode<enter>\
<attach-file>/tmp/msg.txt<enter>\
<attach-file>/tmp/msg.html<enter>\
<tag-entry><previous-entry><tag-entry><group-alternatives>" \
"Convert markdown to HTML5 and plaintext alternative content types"

source /home/mariussw/.config/mutt/accounts/marius@swane.no.muttrc
macro index,pager i1 '<sync-mailbox><enter-command>source /home/mariussw/.config/mutt/accounts/marius@swane.no.muttrc<enter><change-folder>!<enter>;<check-stats>' "switch to marius@swane.no"

macro compose \e5 "F pandoc -s -f markdown -t html \ny^T^Utext/html; charset=utf-8\n"
set wait_key=no

# unbind version from V
bind index,pager V  noop

# bind V to view attachments, find text/html, view it, exit attachments view, and mark msg as read
macro index,pager V "<view-attachments><search>html<enter><view-mailcap><exit><clear-flag>N"
